"use strict";const dropArea=document.querySelector(".dropArea"),avatarForm=document.querySelector(".dropArea form"),fileField=document.getElementById("avatar--file"),errorMsg=document.querySelector(".dropArea .error--msg");["dragover","dragenter","dragleave","drop"].forEach((e=>{dropArea.addEventListener(e,(e=>{e.preventDefault()}))})),["dragover","dragenter"].forEach((e=>{dropArea.addEventListener(e,(()=>{avatarForm.classList.add("highlight")}))})),["dragleave","drop"].forEach((e=>{dropArea.addEventListener(e,(()=>{avatarForm.classList.remove("highlight")}))}));const uploadAvatarFunc=e=>{const r=["image/jpeg","image/jpg","image/png","image/gif"];if(1===e.length&&e[0].size<=16777216&&r.includes(e[0].type)){const r=new FormData;r.append("avatar",e[0]);(async()=>{const e={method:"post",mode:"same-origin",cache:"no-cache",body:r},t=await fetch("/uploadAvatar",e);if(t.ok&&200===t.status)return await t.json();errorMsg.textContent="â˜¹ Sorry something went wrong"})().then((e=>{avatarForm.lastElementChild.matches("img")&&avatarForm.removeChild(avatarForm.lastElementChild);const r=document.createElement("img");r.src=`../static/user-images/${e.pic}`,avatarForm.append(r),errorMsg.textContent=""})).catch(console.error)}else e[0].size>16777216?errorMsg.textContent="file size is greater than 16 MB":r.includes(e[0].type)?errorMsg.textContent="Only one file is allowed to upload":errorMsg.textContent="file in jpg/png/gif format is only allowed"};dropArea.addEventListener("drop",(e=>{const r=[...e.dataTransfer.files];uploadAvatarFunc(r)})),fileField.addEventListener("change",(function(){uploadAvatarFunc([...this.files])}));
//# sourceMappingURL=updateProfile.js.map
