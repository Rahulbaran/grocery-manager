"use strict";const loadingSpinner=document.querySelector(".loading__spinner"),spinnerContainer=document.querySelector(".loading__spinner__container"),tableBody=document.querySelector(".order__table tbody"),totalAmount=document.querySelector("tfoot td span"),firstOrder=document.querySelector(".order__table tbody tr:first-child");let counter=20;const loadOrders=e=>{if(e[0].isIntersecting){const e=async e=>{const t=`/loadOrders?c=${e}`,r=await fetch(t,{mode:"same-origin",method:"get",cache:"no-cache"});if(200===r.status)return await r.json();throw Error("Did not get the expected response")};e(counter).then((e=>{if(!e.orders.length){spinnerContainer.removeChild(spinnerContainer.firstElementChild);const e=document.createElement("p");return e.setAttribute("class","noMoreOrder"),e.textContent="No more Orders",spinnerContainer.append(e),void observer.unobserve(loadingSpinner)}for(let t of e.orders){const e=document.querySelector(".order__table tbody tr:last-child td:first-child").textContent,r=firstOrder.cloneNode(!0),n=r.children;n[0].textContent=+e+1,n[1].textContent=t.customer,n[2].textContent=t.date,n[3].textContent=t.total,tableBody.appendChild(r)}counter+=20;const t=Number(totalAmount.textContent);totalAmount.textContent=`${e.totalPrice+t}`})).catch(console.error)}},observer=new IntersectionObserver(loadOrders);observer.observe(loadingSpinner);
//# sourceMappingURL=home.js.map
